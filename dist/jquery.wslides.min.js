/**
 * j@uery Slides Plugin
 * author: superwzx <wzx175@gmail.com>
 **/
!function(a){function b(b,e){this.el=a(b),this.options=a.extend(!0,{},d,e),this._name=c,this.init()}var c="wslides",d={width:"auto",height:"auto",start:1,navigation:{active:!0},pagination:{active:!0},play:{active:!0,interval:5e3,auto:!1,swap:!1,restartDelay:2500},currentEffect:"slide",effectOptions:{slide:{speed:500},fade:{speed:300,crossfade:!0}},callback:{loaded:function(){},start:function(){},complete:function(){}}};return b.vendorPrefix=function(){for(var a=document.body||document.documentElement,b=a.style,c="Transition",d=["Moz","Webkit","Khtml","O","ms"],e=0,f=d.length;f>e;e++)if("string"==typeof b[d[e]+c])return d[e];return!1}(),b.hasTouch=function(){return"undefined"!=typeof TouchEvent?!0:void 0}(),b.prototype.init=function(){var c=this.el;if(this.animating=!1,this.total=c.children().length,this.current=this.options.start-1,c.css("overflow","hidden"),this.slides=c.children().addClass("wslides-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"}).wrapAll('<div class="wslides-control" />'),this.slidesControl=this.slides.parent().css({position:"relative",left:0}).wrap('<div class="wslides-container" />'),this.slidesContainer=this.slidesControl.parent().css({overflow:"hidden",position:"relative"}),c.show(),this.update(),b.hasTouch&&(this.setupTouch(),this.slidesControl.on("touchstart",a.proxy(this.touchStart,this)),this.slidesControl.on("touchmove",a.proxy(this.touchMove,this)),this.slidesControl.on("touchend",a.proxy(this.touchEnd,this))),this.slidesControl.children(":eq("+this.current+")").eq(0).fadeIn(0,function(){a(this).css("z-index","10")}),this.options.navigation.active){var d,e;d=a("<a>",{"class":"wslides-previous wslides-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(c).on("click",a.proxy(function(a){this.stop(!0),this.previous(),a.preventDefault()},this)),e=a("<a>",{"class":"wslides-next wslides-navigation",href:"#",title:"Next",text:"Next"}).appendTo(c).on("click",a.proxy(function(a){this.stop(!0),this.next(),a.preventDefault()},this))}if(this.options.play.active&&(this.playBtn=a("<a>",{"class":"wslides-play wslides-navigation",href:"#",title:"Play",text:"Play"}).appendTo(c).on("click",a.proxy(function(a){this.play(!0),a.preventDefault()},this)),this.stopBtn=a("<a>",{"class":"wslides-stop wslides-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(c).on("click",a.proxy(function(a){this.stop(!0),a.preventDefault()},this)),this.options.play.swap&&stopBtn.css({display:"none"})),this.options.pagination.active){this.pagination=a("<ul>",{"class":"wslides-pagination"}).appendTo(c);for(var f=0,g=this.total;g>f;f++){var h,i;h=a("<li>",{"class":"wslides-pagination-item"}).appendTo(this.pagination),i=a("<a>",{href:"#","wslides-item":f,html:f+1}).appendTo(h).on("click",a.proxy(function(a){this.stop(!0),this["goto"](+a.currentTarget.getAttribute("wslides-item")+1),a.preventDefault()},this))}this.setPaginationActive()}a(window).on("resize",a.proxy(function(){this.update()},this)),this.options.play.auto&&this.play(),this.options.callback.loaded(this.options.start)},b.prototype.setPaginationActive=function(b){var c=b>-1?b:this.current;a(".active").removeClass("active"),this.pagination.find("li:eq("+c+") a").addClass("active")},b.prototype.update=function(){var a=this.el.width(),b=this.options.height/this.options.width*a;this.options.width=a,this.options.height=b,this.slidesContainer.css({width:a,height:b})},b.prototype.next=function(){this.direction="next","fade"===this.currentEffect?this.fade():this.slide()},b.prototype.previous=function(){this.direction="previous","fade"===this.currentEffect?this.fade():this.slide()},b.prototype["goto"]=function(a){a>this.total&&(a=this.total),1>a&&(a=1),"fade"===this.currentEffect?this.fade(a):this.slide(a)},b.prototype.setupTouch=function(){var a=this.current-1,b=this.current+1;0>a&&(a=this.total-1),b>this.total-1&&(b=0),this.slidesControl.children(":eq("+b+")").css({display:"block",left:this.options.width}),this.slidesControl.children(":eq("+a+")").css({display:"block",left:-this.options.width})},b.prototype.touchStart=function(a){this.setupTouch();var b=a.originalEvent.touches[0];this.touchtimer=Number(new Date),this.touchstartx=b.pageX,this.touchstarty=b.pageY,a.stopPropagation()},b.prototype.touchEnd=function(a){var c=(a.originalEvent.touches[0],this.slidesControl.position().left),d=this.options.width;if(c>.5*d||c>.1*d&&Number(new Date)-this.touchtimer<250)this.direction="previous",this.slide();else if(.5*-d>c||.1*-d>c&&Number(new Date)-this.touchtimer<250)this.direction="next",this.slide();else{var e=b.vendorPrefix+"Transform",f=b.vendorPrefix+"TransitionDuration",g=b.vendorPrefix+"TransitionTimingFunction";this.slidesControl[0].style[e]="translateX(0px)",this.slidesControl[0].style[f]=.85*this.options.effectOptions.slide.speed+"ms",this.slidesControl.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){this.slidesControl[0].style[e]="",this.slidesControl[0].style[f]="",this.slidesControl[0].style[g]=""})}a.stopPropagation()},b.prototype.touchMove=function(a){var c=a.originalEvent.touches[0],d=b.vendorPrefix+"Transform";this.scrolling=Math.abs(c.pageX-this.touchstartx)<Math.abs(c.pageY-this.touchstarty),this.animating||this.scrolling||(a.preventDefault(),this.setupTouch(),this.slidesControl[0].style[d]="translateX("+(c.pageX-this.touchstartx)+"px)"),a.stopPropagation()},b.prototype.play=function(){this.playInterval&&(this.playInterval=setInterval(a.proxy(function(){this.direction="next","fade"===this.currentEffect?this.fade():this.slide()},this),this.options.play.interval),this.playing=!0,this.playBtn.addClass("wslides-playing"),this.options.play.swap&&(a(".wslides-play").hide(),a(".wslides-stop").show()))},b.prototype.stop=function(){clearInterval(this.playInterval),this.playInterval=null,this.playing=!1,this.options.play.active&&this.playBtn.removeClass("wslides-playing"),this.options.play.swap&&(a(".wslides-stop").hide(),a(".wslides-play").show())},b.prototype.slide=function(c){if(!this.animating&&c!==g+1){var d,e,f,g=this.current,h=this.options.width;this.animating=!0,c?(c-=1,f=c>g?1:-1,d=c>g?-h:h,e=c):(f="next"===this.direction?1:-1,d="next"===this.direction?-h:h,e=g+f),-1===e&&(e=this.total-1),e===this.total&&(e=0),this.setPaginationActive(e);var i=this.slidesControl;if(i.children(":eq("+e+")").css({display:"block",left:f*this.options.width,zIndex:10}),this.options.callback.start(g+1),b.vendorPrefix){var j=b.vendorPrefix+"Transform",k=b.vendorPrefix+"TransitionDuration";i[0].style[j]="translateX("+d+"px)",i[0].style[k]=this.options.effectOptions.slide.speed+"ms",i.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",a.proxy(function(){i[0].style[j]="",i[0].style[k]="",i.children(":eq("+e+")").css({left:0}),i.children(":not(:eq("+e+"))").css({display:"none",left:0,zIndex:0})},this))}else i.stop().animate({left:direction},this.options.effect.slide.speed,function(){i.css({left:0}),i.children(":eq("+e+")").css({left:0}),i.children(":eq("+g+")").css({display:"none",left:0,zIndex:0})});this.current=e,this.animating=!1,b.hasTouch&&this.setupTouch(),this.options.callback.complete(e+1)}},b.prototype.fade=function(b){if(!this.animating&&b!==this.current+1){var c,d,e=this.data.current;this.animating=!0,b?(b-=1,d=b>e?1:-1,c=b):(d="next"===this.direction?1:-1,c=e+d),-1===c&&(c=this.total-1),c===this.total&&(c=0),this.setPaginationActive(c);var f=this.slidesControl;f.children(":eq("+c+")").css({display:"none",left:0,zIndex:10}),this.options.callback.start(e+1),this.options.effectOption.fade.crossfade?(f.children(":eq("+this.current+")").stop().fadeOut(this.options.effect.fade.speed),f.children(":eq("+c+")").stop().fadeIn(this.options.effect.fade.speed,a.proxy(function(){f.children(":eq("+c+")").css("z-index","0"),this.animating=!1,this.current=c,this.options.callback.complete(c+1)},this))):f.children(":eq("+e+")").stop().fadeOut(this.options.effect.fade.speed,a.proxy(function(){f.children(":eq("+c+")").stop().fadeIn(this.options.effect.fade.speed,function(){f.children(":eq("+c+")").css("z-index","10")}),this.animating=!1,this.current=c,this.options.callback.complete(c+1)},this))}},a.fn[c]=function(d){return this.each(function(){return a.data(this,"plugin_"+c)?void 0:a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery);